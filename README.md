# **[YaMDb](https://github.com/ArturioNe/api_yamdb.git)**

## **Описание проекта.**
Проект YaMDb собирает отзывы (Review) пользователей на произведения (Titles). 
Произведения делятся на категории: «Книги», «Фильмы», «Музыка». 
Список категорий (Category) может быть расширен администратором.
Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
В каждой категории есть произведения: книги, фильмы или музыка.
Произведению может быть присвоен жанр (Genre) из списка предустановленных(например, «Сказка», «Рок» или «Артхаус»). 
Новые жанры может создавать только администратор.
Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review). 
На одно произведение пользователь может оставить только один отзыв.

## Подготовка.
Убедитесь, что у вас установлен Docker:
+ запустите командную строку
+ выполните команду ```docker --version```.
В ответе вы увидите какая версия Docker у вас установлена.

Если ранее вы не работали с Docker, то перейдите на [официальный сайт](https://www.docker.com/products/docker-desktop) 
и скачайте установочный файл Docker Desktop для вашей операционной системы.
Запустите его и следуйте инструкциям по установке. После установки вы увидите окно с сообщением 
Service is not running: программа установлена, но демон докера не запущен. Нажмите кнопку Start.

## Запуск приложения.

1. Клонируйте репозиторий и откройте его в своей среде разработки:

``` git clone https://github.com/ArturioNe/infra_sp2.git```

2. Создайте виртуальное окружение проекта выполнив команду:

``` python -m venv venv```

3. Активируйте виртуальное окружение и установите пакеты из файла requirements.txt:

``` venv\Scripts\activate ```
   
``` pip install -r requirements.txt ```

4. Перейдите в папку с репозиторием.
   Обратите внимание на файл .env. В реальном проекте этот файл нужно спрятать от посторонних глаз, но у нас
   проект учебный так что все в порядке.

5. Для запуска docker-compose выполните команду:

``` docker-compose up -d --build ```

Сборка может занять некоторое время, по окончании работы docker-compose сообщит, 
что контейнеры собраны и запущены:
![](https://pictures.s3.yandex.net/resources/S18_03_03_1619103276.png)

6. Выполните миграции:

``` docker-compose exec web python manage.py migrate auth ```

``` docker-compose exec web python manage.py migrate --run-syncdb ```

7. Установите статику проекта

``` docker-compose exec web python manage.py collectstatic --no-input  ```

8. Заполните базу данных:

``` docker-compose exec web python3 manage.py loaddata fixtures.json ```

9. Создайте суперпользователя:

``` docker-compose exec web python manage.py createsuperuser ```

   
Теперь проект доступен по адресу http://127.0.0.1/. 
При этом номер порта указывать уже не надо: умный nginx принимает запросы на стандартном порте 
и перенаправляет их в приложение.
Зайдите на http://127.0.0.1/admin/ и убедитесь, что страница отображается полностью: статика подгрузилась.
Авторизуйтесь под аккаунтом суперпользователя и убедитесь, что миграции прошли успешно.
